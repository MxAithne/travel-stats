!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.ospoint=t()}}(function(){return function t(n,r,e){function o(u,a){if(!r[u]){if(!n[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[u]={exports:{}};n[u][0].call(c.exports,function(t){var r=n[u][1][t];return o(r?r:t)},c,c.exports,t,n,r,e)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(t,n,r){"use strict";function e(t,n){this.northings=parseInt(t,10),this.eastings=parseInt(n,10)}e.toRadians=function(t){return l(t)},e.toDegrees=function(t){return g(t)},e.nu=function(t,n,r,e){var o=t*n,u=1-r*i(e);return o*Math.pow(u,-.5)},e.rho=function(t,n,r,e){var o=t*n,u=1-r,a=1-r*i(e);return o*u*Math.pow(a,-1.5)},e.e2=function(t,n){return(t*t-n*n)/(t*t)},e.M=function(t,n,r,e,i){var a=(t-n)/(t+n),s=a*a,f=a*a*a,c=(1+a+5/4*s+5/4*f)*(e-i),d=(3*a+3*s+21/8*f)*o(e-i)*u(e+i),h=(15/8*s+15/8*f)*o(2*(e-i))*u(2*(e+i)),l=35/24*f*o(3*(e-i))*u(3*(e+i));return n*r*(c-d+h-l)},e.eta2=function(t,n){return t/n-1},e.toDecimalFromDMS=function(t,n,r){return p(t,n,r)};var o=function(t){return Math.sin(t)},i=function(t){return Math.pow(Math.sin(t),2)},u=function(t){return Math.cos(t)},a=function(t){return Math.tan(t)},s=function(t){return Math.pow(Math.tan(t),2)},f=function(t){return Math.pow(Math.tan(t),4)},c=function(t){return Math.pow(Math.tan(t),6)},d=function(t){return Math.atan(t)},h=function(t){return Math.pow(Math.cos(t),-1)},l=function(t){return t/180*Math.PI},g=function(t){return t/Math.PI*180},p=function(t,n,r){return t+n/60+r/3600},M=function(t,n,r){return l(p(t,n,r))},y={airy1830:{a:6377563.396,b:6356256.909},grs80:{a:6378137,b:6356752.3141},airy1830_modified:{a:6377340.189,b:6356034.447}},v={national_grid:{scaleFactor:.9996012717,trueOrigin:{longitude:M(-2,0,0),latitude:M(49,0,0),eastings:4e5,northings:-1e5},ellipsoid:"airy1830"},irish_national_grid:{scaleFactor:1.000035,trueOrigin:{longitude:M(-8,0,0),latitude:M(53,30,0),eastings:2e5,northings:25e4},ellipsoid:"airy1830_modified"}};e.prototype.toOSGB36=function(t){var n=x(this.northings,this.eastings,t);return{longitude:e.toDegrees(n.longitude),latitude:e.toDegrees(n.latitude)}},e.prototype.toETRS89=function(t){var n=x(this.northings,this.eastings,t),r=0,o=e.toCartesian(n.longitude,n.latitude,r),i=e.helmertTransformation(o),u=e.toLatLon(i.x,i.y,i.z,"grs80");return{longitude:e.toDegrees(u.longitude),latitude:e.toDegrees(u.latitude)}},e.prototype.toWGS84=function(t){return this.toETRS89(t)},e.prototype.mercatorToLatLon=function(){return x(this.northings,this.eastings)},e.toCartesian=function(t,n,r,a){var a=y[a]||y.airy1830,s=a.a,f=a.b,c=e.e2(s,f),d=s*Math.pow(1-c*i(n),-.5),h=(d+r)*u(n)*u(t),l=(d+r)*u(n)*o(t),g=((1-c)*d+r)*o(n);return{x:h,y:l,z:g}},e.toLatLon=function(t,n,r,a){for(var a=y[a]||y.airy1830,s=a.a,f=a.b,c=e.e2(s,f),h=d(n/t),l=Math.pow(t*t+n*n,.5),g=d(r/(l*(1-c))),p=function(t){return s*Math.pow(1-c*i(t),-.5)},M=p(g),v=function(t,n){return d((r+c*t*o(n))/l)},w=v(M,g),x=1e-10;Math.abs(w-g)>x;)M=p(w),g=w,w=v(M,g);var b=l/u(w)-M;return{latitude:w,longitude:h,height:b}};var w={etrs89:{to_osgb36:{tx:-446.448,ty:125.157,tz:-542.06,rx:-.1502,ry:-.247,rz:-.8421,s:20.4894}},osgb36:{to_etrs89:{tx:446.448,ty:-125.157,tz:542.06,rx:.1502,ry:.247,rz:.8421,s:-20.4894}}};e.helmertTransformation=function(t,n){var r=n||w.osgb36.to_etrs89,o=t.x,i=t.y,u=t.z,a=r.tx,s=r.ty,f=r.tz,c=e.toRadians(r.rx/3600),d=e.toRadians(r.ry/3600),h=e.toRadians(r.rz/3600),l=1e-6*r.s,g=a+(1+l)*o+-c*i+d*u,p=s+h*o+(1+l)*i+-c*u,M=f+-d*o+c*i+(1+l)*u;return{x:g,y:p,z:M}};var x=function(t,n,r){for(var r=v[r]||v.national_grid,o=y[r.ellipsoid],i=n,u=t,d=o.a,l=o.b,g=e.e2(d,l),p=r.scaleFactor,M=r.trueOrigin.northings,w=r.trueOrigin.eastings,x=r.trueOrigin.latitude,b=r.trueOrigin.longitude,m=(u-M)/(d*p)+x,_=e.M(d,l,p,m,x);u-M-_>=1e-4;)m=(u-M-_)/(d*p)+m,_=e.M(d,l,p,m,x);var z=e.rho(d,p,g,m),O=e.nu(d,p,g,m),D=e.eta2(O,z),L=function(t,n,r){return a(t)/(2*r*n)}(m,O,z),R=function(t,n,r,e){var o=a(t)/(24*r*Math.pow(n,3)),i=5+3*s(t)+e-9*s(t)*e;return o*i}(m,O,z,D),T=function(t,n,r){var e=a(t)/(720*r*Math.pow(n,5)),o=61+90*s(t)+45*f(t);return e*o}(m,O,z),F=function(t,n){return h(t)/n}(m,O),S=function(t,n,r){var e=h(t)/(6*Math.pow(n,3)),o=n/r+2*s(t);return e*o}(m,O,z),q=function(t,n){var r=h(t)/(120*Math.pow(n,5)),e=5+28*s(t)+24*f(t);return r*e}(m,O),E=function(t,n){var r=h(t)/(5040*Math.pow(n,7)),e=61+662*s(t)+1320*f(t)+720*c(t);return r*e}(m,O),i=i-w,I=i*i,C=I*i,G=C*i,N=G*i,P=N*i,U=P*i,j=m-L*I+R*G-T*P,B=b+F*i-S*C+q*N-E*U;return{latitude:j,longitude:B}};n.exports=e},{}]},{},[1])(1)});